os:
- osx
osx_image: xcode7.2
language: generic
env:
  global:
  - 'DEVELOPER_NAME="Mac Distribution: Deco Desktop Production (M5Y2HY4UM2)"'
  - PROFILE_NAME="Deco_Desktop_Production"
  - SIGN_DECO_PACKAGE="true"
  - secure: CNQPrLV04kVs3s1FT3QGDE0hxeodtm9fdc6L3e6P3ElqHNvGrSY9satPCQY7IG+/gePLZv2xzHezceVXEalwmGyCeIe2oO+tXcwW0eMyLSAFJASpbigFkdZGnPkF9THwbfkmbu2jh7xpCrk9w11GQHQjNHyVV7HUsI9aMtAlIpyY+toE9J389UqvYrvfQg2wLX4b/87YrL+d3+eoBl4n+uoZpVbLeaPtu8Wi//cmJBVggL289RfPyJXoYfe7KDqokyTlDnXWRw829S8ogFPvRg0tyDSkT6dHYfMNnjReTIzDPNNEck+rCdhlBeJ7YmDevcHCuvJ3W099wdMGdgmMCt91KHYZmCJHQItehQX2U9L2mIa8P2gMWWs6cNppD+bkUTQ1OqaZVw/JuvQEObsbnivq853yOpitk0GCre68M7xw1LRjvdbqY9U6+njUOg71Bsf648OHNZ593g1nxCP1kANBdRDQzz1sYG1WR+1Cu6M0zSUfuCw0XuV/n41loIz4aMoMZJwkc6JOveNaWCikqJovkAgVHblqtiuAmduLlfZTjRFPMeN7njd993GFxl4E0LWXvIZ3+Z9ER5NZgcPPEdnxjlXzvmSGFxXQ1gG1v6R1gN08z7YUsfcPE0T0dqkDG7A9HEIGZnUik4U6cRTp+/x5NrT/HScp7lOaQG+V9m0=
  matrix:
  - NODE_VERSION="5.7"
before_install:
- brew update
- brew install curl
- git clone https://github.com/creationix/nvm.git /tmp/.nvm; source /tmp/.nvm/nvm.sh;
  nvm install $NODE_VERSION; nvm use --delete-prefix $NODE_VERSION;
install:
- "./build/install-dependencies.sh"
script:
- "./build/run-pack.sh"
cache:
  bundler: true
  directories:
  - shared/node_modules
  - desktop/node_modules
  - web/node_modules
deploy:
- provider: s3
  access_key_id: AKIAIJJHZXFRB7X2EGSA
  secret_access_key:
    secure: OYHWU0QNmOW2WqJQbuOQWnmjjo8UWDt0K0HfNmb2Af50AV+wTSakjH2uZp1fPSSx94mMrL2Wk/HHhvGqAy3z38rKIqFpDqpMJeagL+6TpMpOYQsL7fK5AOw6MbJfHYBQ4PPv5sHYDQQSH0tvw5FnmqBZ+vLRL1hq5ax+l+PEId54qKWL4YhX7GcdWdSzaMJsDEjZ+jYPEQliXhQ0pD8CzTkPCOEY1Cxb9xkCKBupO/OSLRRBjwUgOE4xjseQ5Izbb3xBrqnnDA6bN3hSFlbFMbrzjaLFPP67Yuxdky6g84/GPqrjNUezB+vd9CF6bOpHtafGBBv8DqdI5/CVmC/vxmk2duFstCoVK7D8Gc+xqEXnysfSuuy2UgRtlT3cx0ri6vrIVHl9DwYWjBDrqdkOMRzKOg1f00RH0PUB7q6Af0XOoBERy8I2DyU3XQUBUeIRkLIVm4Yt8TuZrmi2RU2qlHPwS4XkS+qKKUSwQ1gH0Z5eGlbgU/CjW2ZW6frzEYqtFMz8y+tjNcn/DebrjtiWyoRGGFb7AUKMzmKlseM0ncNXu4tJPrX+3fLp/fhkSyOh1DfFqIccM45R/MK4g/+9WhU3Ye6Bf6SwVpWCIeooW92DK0TyC1uFMRCyNHXbtxKuz7AYPpjGmstZxjz/g/RCweYsU5JouEDcLlIPR/RSa9o=
  bucket: decopkgs
  skip_cleanup: true
  local_dir: dist
  on:
    branch: release
- provider: s3
  access_key_id: AKIAIJJHZXFRB7X2EGSA
  secret_access_key:
    secure: OYHWU0QNmOW2WqJQbuOQWnmjjo8UWDt0K0HfNmb2Af50AV+wTSakjH2uZp1fPSSx94mMrL2Wk/HHhvGqAy3z38rKIqFpDqpMJeagL+6TpMpOYQsL7fK5AOw6MbJfHYBQ4PPv5sHYDQQSH0tvw5FnmqBZ+vLRL1hq5ax+l+PEId54qKWL4YhX7GcdWdSzaMJsDEjZ+jYPEQliXhQ0pD8CzTkPCOEY1Cxb9xkCKBupO/OSLRRBjwUgOE4xjseQ5Izbb3xBrqnnDA6bN3hSFlbFMbrzjaLFPP67Yuxdky6g84/GPqrjNUezB+vd9CF6bOpHtafGBBv8DqdI5/CVmC/vxmk2duFstCoVK7D8Gc+xqEXnysfSuuy2UgRtlT3cx0ri6vrIVHl9DwYWjBDrqdkOMRzKOg1f00RH0PUB7q6Af0XOoBERy8I2DyU3XQUBUeIRkLIVm4Yt8TuZrmi2RU2qlHPwS4XkS+qKKUSwQ1gH0Z5eGlbgU/CjW2ZW6frzEYqtFMz8y+tjNcn/DebrjtiWyoRGGFb7AUKMzmKlseM0ncNXu4tJPrX+3fLp/fhkSyOh1DfFqIccM45R/MK4g/+9WhU3Ye6Bf6SwVpWCIeooW92DK0TyC1uFMRCyNHXbtxKuz7AYPpjGmstZxjz/g/RCweYsU5JouEDcLlIPR/RSa9o=
  bucket: decopkgs-staging
  skip_cleanup: true
  local_dir: dist
  on:
    branch: staging
- provider: s3
  access_key_id: AKIAIJJHZXFRB7X2EGSA
  secret_access_key:
    secure: OYHWU0QNmOW2WqJQbuOQWnmjjo8UWDt0K0HfNmb2Af50AV+wTSakjH2uZp1fPSSx94mMrL2Wk/HHhvGqAy3z38rKIqFpDqpMJeagL+6TpMpOYQsL7fK5AOw6MbJfHYBQ4PPv5sHYDQQSH0tvw5FnmqBZ+vLRL1hq5ax+l+PEId54qKWL4YhX7GcdWdSzaMJsDEjZ+jYPEQliXhQ0pD8CzTkPCOEY1Cxb9xkCKBupO/OSLRRBjwUgOE4xjseQ5Izbb3xBrqnnDA6bN3hSFlbFMbrzjaLFPP67Yuxdky6g84/GPqrjNUezB+vd9CF6bOpHtafGBBv8DqdI5/CVmC/vxmk2duFstCoVK7D8Gc+xqEXnysfSuuy2UgRtlT3cx0ri6vrIVHl9DwYWjBDrqdkOMRzKOg1f00RH0PUB7q6Af0XOoBERy8I2DyU3XQUBUeIRkLIVm4Yt8TuZrmi2RU2qlHPwS4XkS+qKKUSwQ1gH0Z5eGlbgU/CjW2ZW6frzEYqtFMz8y+tjNcn/DebrjtiWyoRGGFb7AUKMzmKlseM0ncNXu4tJPrX+3fLp/fhkSyOh1DfFqIccM45R/MK4g/+9WhU3Ye6Bf6SwVpWCIeooW92DK0TyC1uFMRCyNHXbtxKuz7AYPpjGmstZxjz/g/RCweYsU5JouEDcLlIPR/RSa9o=
  bucket: decopkgs-bleeding-edge
  skip_cleanup: true
  local_dir: dist
  on:
    branch: master
branches:
  only:
  - release
  - staging
  - master
notifications:
  slack:
    secure: AKO68ZNCj+eCdZEx1tnBZ7+NGYWoOL6fo5zIWacIZ7sg67SeRsTYa6hEJ9e4FTq/riLlWWjU+lTSqYWIb3XfHe4BkhpO1wPXkExF/JGplFEaesUbKeMUi+zbMnrZh/b1lHujOlIXAQv2OSrcvh6zClRrbHXdPWrn/Vr1Z5XCkI63svuLEsXA+4KfTRqOEfFLshpJwwyPFjc51LNSFcqbbUN8i8jRUxoH5NXec74hXSFVNuunLnIx78PvU2O9Ge1qXJ8IXuj3j8/iVq1O2J4j2omvFegcTuETfaGI9NUuQxYEUIvGnk5CSIhCjlBmAGvjlqwcxPws6SJ61uZPrjeEYVMtEzsX+C6wxkDId1t9HadtqiEybnUB8mAt2VHByFicn9e3DM47TodAoRnxq4POXOG0ShRHdooZ+s3RTYw2IqleQboI9ej3mUbnYTTQhxRg+XCANvOa1jm43Hy27fEWbOY00W5JDuNEAOXaSgtLX4b9jZmsZfF1d1oL47spi4LiScTVAo/SeXcalIKcphLxPRLR/L0K33kjJV9/y/BpsZI9Jn3l3rlOTuQT7s7Y67DwSoz0Pss5mcxcTdSiOK+MrsJbHM8fXlSbiUNVx5CQYzVxhWdhTV8YRBp3PGJItm1+JGhpfFWyJIkGvzipctWnvkMvhbHQvnZF2NiaY0c4M1w=
